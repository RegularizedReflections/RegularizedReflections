<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animation Terre-Soleil</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #000;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        canvas {
            display: block;
        }
        .controls {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            z-index: 100;
        }
        .info {
            position: absolute;
            bottom: 20px;
            left: 20px;
            color: white;
            font-size: 14px;
            z-index: 100;
        }
        button {
            background: #333;
            color: white;
            border: none;
            padding: 10px 15px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background: #555;
        }
    </style>
</head>
<body>
    <div class="controls">
        <button id="playPause">‚è∏Ô∏è Pause</button>
        <button id="reset">üîÑ Reset</button>
    </div>
    <div class="info">
        <div>1 ann√©e = 10 secondes</div>
        <div>Rotation terrestre : 24h r√©elles</div>
        <div id="timeDisplay">Temps: 0.0s</div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // Configuration
        const YEAR_DURATION = 10; // secondes pour une ann√©e compl√®te
        const EARTH_ROTATION_SPEED = 365.25; // rotations par ann√©e (365.25 jours)
        
        // Variables globales
        let scene, camera, renderer, earth, sun, earthOrbit;
        let isPlaying = true;
        let startTime = Date.now();
        let pausedTime = 0;
        
        // Initialisation
        function init() {
            // Sc√®ne
            scene = new THREE.Scene();
            
            // Cam√©ra
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 50, 100);
            camera.lookAt(0, 0, 0);
            
            // Renderer
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            document.body.appendChild(renderer.domElement);
            
            // √âtoiles en arri√®re-plan
            createStars();
            
            // Soleil
            createSun();
            
            // Terre
            createEarth();
            
            // Lumi√®re
            setupLighting();
            
            // Contr√¥les
            setupControls();
            
            // Redimensionnement
            window.addEventListener('resize', onWindowResize);
            
            // D√©marrage de l'animation
            animate();
        }
        
        function createStars() {
            const starsGeometry = new THREE.BufferGeometry();
            const starsMaterial = new THREE.PointsMaterial({ color: 0xffffff, size: 0.5 });
            
            const starsVertices = [];
            for (let i = 0; i < 1000; i++) {
                const x = (Math.random() - 0.5) * 800;
                const y = (Math.random() - 0.5) * 800;
                const z = (Math.random() - 0.5) * 800;
                starsVertices.push(x, y, z);
            }
            
            starsGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starsVertices, 3));
            const stars = new THREE.Points(starsGeometry, starsMaterial);
            scene.add(stars);
        }
        
        function createSun() {
            const sunGeometry = new THREE.SphereGeometry(8, 32, 32);
            const sunMaterial = new THREE.MeshBasicMaterial({ 
                color: 0xffff00,
                emissive: 0xffaa00,
                emissiveIntensity: 0.3
            });
            
            sun = new THREE.Mesh(sunGeometry, sunMaterial);
            sun.position.set(0, 0, 0);
            scene.add(sun);
            
            // Halo autour du soleil
            const haloGeometry = new THREE.SphereGeometry(10, 32, 32);
            const haloMaterial = new THREE.MeshBasicMaterial({ 
                color: 0xffff00,
                transparent: true,
                opacity: 0.1
            });
            const halo = new THREE.Mesh(haloGeometry, haloMaterial);
            sun.add(halo);
        }
        
        function createEarth() {
            // Groupe pour l'orbite de la Terre
            earthOrbit = new THREE.Group();
            scene.add(earthOrbit);
            
            // Terre
            const earthGeometry = new THREE.SphereGeometry(3, 32, 32);
            const earthMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x2233ff,
                emissive: 0x001122,
                shininess: 100
            });
            
            earth = new THREE.Mesh(earthGeometry, earthMaterial);
            earth.position.set(60, 0, 0); // Distance du soleil
            earth.castShadow = true;
            earth.receiveShadow = true;
            
            // Continents simplifi√©s
            const continentGeometry = new THREE.SphereGeometry(3.05, 32, 32);
            const continentMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x228B22,
                transparent: true,
                opacity: 0.8
            });
            const continents = new THREE.Mesh(continentGeometry, continentMaterial);
            earth.add(continents);
            
            // Atmosph√®re
            const atmosphereGeometry = new THREE.SphereGeometry(3.2, 32, 32);
            const atmosphereMaterial = new THREE.MeshBasicMaterial({ 
                color: 0x88ccff,
                transparent: true,
                opacity: 0.1
            });
            const atmosphere = new THREE.Mesh(atmosphereGeometry, atmosphereMaterial);
            earth.add(atmosphere);
            
            earthOrbit.add(earth);
            
            // Orbite visible
            const orbitGeometry = new THREE.RingGeometry(59, 61, 64);
            const orbitMaterial = new THREE.MeshBasicMaterial({ 
                color: 0x444444,
                transparent: true,
                opacity: 0.2,
                side: THREE.DoubleSide
            });
            const orbitRing = new THREE.Mesh(orbitGeometry, orbitMaterial);
            orbitRing.rotation.x = Math.PI / 2;
            scene.add(orbitRing);
        }
        
        function setupLighting() {
            // Lumi√®re directionnelle (soleil)
            const sunLight = new THREE.DirectionalLight(0xffffff, 1);
            sunLight.position.set(0, 0, 0);
            sunLight.castShadow = true;
            sunLight.shadow.camera.near = 0.1;
            sunLight.shadow.camera.far = 200;
            sunLight.shadow.camera.left = -100;
            sunLight.shadow.camera.right = 100;
            sunLight.shadow.camera.top = 100;
            sunLight.shadow.camera.bottom = -100;
            scene.add(sunLight);
            
            // Lumi√®re ambiante
            const ambientLight = new THREE.AmbientLight(0x404040, 0.3);
            scene.add(ambientLight);
        }
        
        function setupControls() {
            const playPauseBtn = document.getElementById('playPause');
            const resetBtn = document.getElementById('reset');
            
            playPauseBtn.addEventListener('click', () => {
                isPlaying = !isPlaying;
                if (isPlaying) {
                    playPauseBtn.textContent = '‚è∏Ô∏è Pause';
                    startTime = Date.now() - pausedTime;
                } else {
                    playPauseBtn.textContent = '‚ñ∂Ô∏è Play';
                    pausedTime = Date.now() - startTime;
                }
            });
            
            resetBtn.addEventListener('click', () => {
                startTime = Date.now();
                pausedTime = 0;
                earthOrbit.rotation.y = 0;
                earth.rotation.y = 0;
            });
        }
        
        function animate() {
            requestAnimationFrame(animate);
            
            if (isPlaying) {
                const currentTime = Date.now();
                const elapsedTime = (currentTime - startTime) / 1000; // en secondes
                
                // Rotation de la Terre autour du Soleil (orbite)
                const orbitAngle = (elapsedTime / YEAR_DURATION) * Math.PI * 2;
                earthOrbit.rotation.y = orbitAngle;
                
                // Rotation de la Terre sur elle-m√™me
                const earthRotationAngle = (elapsedTime / YEAR_DURATION) * EARTH_ROTATION_SPEED * Math.PI * 2;
                earth.rotation.y = earthRotationAngle;
                
                // Rotation du soleil
                sun.rotation.y = elapsedTime * 0.1;
                
                // Mise √† jour de l'affichage du temps
                document.getElementById('timeDisplay').textContent = `Temps: ${elapsedTime.toFixed(1)}s`;
            }
            
            // Rotation de la cam√©ra autour de la sc√®ne
            const cameraAngle = Date.now() * 0.0001;
            camera.position.x = Math.cos(cameraAngle) * 100;
            camera.position.z = Math.sin(cameraAngle) * 100;
            camera.lookAt(0, 0, 0);
            
            renderer.render(scene, camera);
        }
        
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        
        // D√©marrage
        init();
    </script>
</body>
</html>
